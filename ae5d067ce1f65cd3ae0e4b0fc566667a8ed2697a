{
  "comments": [
    {
      "key": {
        "uuid": "3a961159_55e79ee4",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 217,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "This could be a local val: see below.",
      "range": {
        "startLine": 217,
        "startChar": 4,
        "endLine": 217,
        "endChar": 50
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_35e212d6",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 220,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "VpnServiceUpdate",
      "range": {
        "startLine": 220,
        "startChar": 23,
        "endLine": 220,
        "endChar": 45
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_f5c08a2c",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 234,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "I would favor making the craetePromise a local val an passing it as argument to the vonServiceUpdateEvent method. In this way, we are guaranteed that each subscriber to the observable completes only the promise for which it was created. You can do this as:\n\n             val createPromise \u003d Promise[String]\n            vpnServiceSubscription \u003d vpnServiceObservable(port)\n                .subscribe(makeAction1((e: VpnServiceUpdatedEvent) \u003d\u003e vpnServiceUpdateEvent(e, createPromise)))\n            createPromise.future\n\nwhere:\n\nprivate def vpnServiceUpdateEvent(updateEvent: VpnServiceUpdatedEvent,\n                                     p: Promise[String]): Unit \u003d {",
      "range": {
        "startLine": 234,
        "startChar": 12,
        "endLine": 234,
        "endChar": 43
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_759e5a58",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 235,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "Test the subscription is not null, and if so, unsubscribe.",
      "range": {
        "startLine": 235,
        "startChar": 12,
        "endLine": 235,
        "endChar": 34
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_158fd624",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 236,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "What if there is an error or the observable completes without emitting anything? Shouldn\u0027t complete the promise then too?",
      "range": {
        "startLine": 236,
        "startChar": 27,
        "endLine": 236,
        "endChar": 61
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_35bbf2c5",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 272,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "make subscription null",
      "range": {
        "startLine": 272,
        "startChar": 12,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_358db232",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 357,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "Is the scheduling on the VT scheduler really needed? It doesn\u0027t seem to serve any purpose for synchronization",
      "range": {
        "startLine": 357,
        "startChar": 12,
        "endLine": 357,
        "endChar": 35
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_55823e01",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 362,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "Same as above.",
      "range": {
        "startLine": 362,
        "startChar": 11,
        "endLine": 362,
        "endChar": 35
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_75873a10",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 373,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "Same as above",
      "range": {
        "startLine": 373,
        "startChar": 12,
        "endLine": 373,
        "endChar": 35
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_957bc628",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 387,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "Nit: not needed (case class)",
      "range": {
        "startLine": 387,
        "startChar": 8,
        "endLine": 387,
        "endChar": 11
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_15dd1615",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 395,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "vpnServiceUpdated or onVpnServiceUpdate?",
      "range": {
        "startLine": 395,
        "startChar": 16,
        "endLine": 395,
        "endChar": 37
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_b578c22c",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 397,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "The match is not needed",
      "range": {
        "startLine": 396,
        "startChar": 8,
        "endLine": 397,
        "endChar": 68
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_d5754e33",
        "filename": "midolman/src/main/scala/org/midonet/containers/IPSecContainer.scala",
        "patchSetId": 2
      },
      "lineNbr": 443,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "NonFatal(e)",
      "range": {
        "startLine": 443,
        "startChar": 25,
        "endLine": 443,
        "endChar": 37
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_b5cd2260",
        "filename": "midolman/src/main/scala/org/midonet/midolman/containers/ContainerService.scala",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "Should we log if we ever get there?",
      "range": {
        "startLine": 117,
        "startChar": 53,
        "endLine": 117,
        "endChar": 55
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_1504367d",
        "filename": "midolman/src/main/scala/org/midonet/midolman/containers/ContainerService.scala",
        "patchSetId": 2
      },
      "lineNbr": 277,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "Shouldn\u0027t all these go as cargo on the belt too? For instance, here you are setting the status to STARTING, but if the cargo above will complete after, it will clear the status.",
      "range": {
        "startLine": 264,
        "startChar": 0,
        "endLine": 277,
        "endChar": 67
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a961159_7503ba73",
        "filename": "midolman/src/main/scala/org/midonet/midolman/containers/ContainerService.scala",
        "patchSetId": 2
      },
      "lineNbr": 336,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-12-29T10:27:42Z",
      "side": 1,
      "message": "The same comment here too",
      "range": {
        "startLine": 332,
        "startChar": 0,
        "endLine": 336,
        "endChar": 71
      },
      "revId": "ae5d067ce1f65cd3ae0e4b0fc566667a8ed2697a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}