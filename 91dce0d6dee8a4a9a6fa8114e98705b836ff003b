{
  "comments": [
    {
      "key": {
        "uuid": "7a1969be_15d2025c",
        "filename": "midolman/src/main/scala/org/midonet/midolman/DeduplicationActor.scala",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-02-26T09:47:30Z",
      "side": 1,
      "message": "I don\u0027t think we should tag flows with the TraceKey. There doesn\u0027t seem to be a case where removing the TraceKey causes flows to be invalidated.\n\n(And once the flow disappears, we can immediately invalidate the TraceKey, so the expiration timeout can be very small)",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_6f6efa30",
        "filename": "midolman/src/main/scala/org/midonet/midolman/DeduplicationActor.scala",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2015-03-02T13:54:15Z",
      "side": 1,
      "message": "will remove invalidation.",
      "parentUuid": "7a1969be_15d2025c",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_b5e32e32",
        "filename": "midolman/src/main/scala/org/midonet/midolman/DeduplicationActor.scala",
        "patchSetId": 1
      },
      "lineNbr": 350,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-02-26T09:47:30Z",
      "side": 1,
      "message": "Then should this be here? If we want the state to persist after multiple NotYetExceptions, then this can\u0027t be here. The most appropriate place would be the packetcontext\u0027s clear method.",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_ef614a3a",
        "filename": "midolman/src/main/scala/org/midonet/midolman/DeduplicationActor.scala",
        "patchSetId": 1
      },
      "lineNbr": 350,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2015-03-02T13:54:15Z",
      "side": 1,
      "message": "will move.",
      "parentUuid": "7a1969be_b5e32e32",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_5522baa4",
        "filename": "midolman/src/main/scala/org/midonet/midolman/state/TraceState.scala",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-02-26T08:53:04Z",
      "side": 1,
      "message": "question: why do trace keys contain flow actions?",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_8f4536b5",
        "filename": "midolman/src/main/scala/org/midonet/midolman/state/TraceState.scala",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2015-03-02T13:54:15Z",
      "side": 1,
      "message": "to match on the egress host, you need the flow to match, and the actions may modify the field (via nat, etc).",
      "parentUuid": "7a1969be_5522baa4",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_75c0967c",
        "filename": "midolman/src/main/scala/org/midonet/midolman/state/TraceState.scala",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-02-26T09:52:21Z",
      "side": 1,
      "message": "I\u0027d be very careful about this. Does the ttl count to differentiate flows, or should they be the same? What about ip fragment type? Seen and used fields? I\u0027d prefer to not use the flow match and instead explicitly write here the fields we use to identify the trace. This is will also help me later when i move this offheap.",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_4f221e02",
        "filename": "midolman/src/main/scala/org/midonet/midolman/state/TraceState.scala",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2015-03-02T13:54:15Z",
      "side": 1,
      "message": "I\u0027ll pull out the fields to use them explicitly.",
      "parentUuid": "7a1969be_75c0967c",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_f53be699",
        "filename": "midolman/src/main/scala/org/midonet/midolman/state/TraceState.scala",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-02-26T09:55:34Z",
      "side": 1,
      "message": "I\u0027m worried about this, being of varied size :/  Why do we need multiple requests per trace key again?",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_cf7d6ee9",
        "filename": "midolman/src/main/scala/org/midonet/midolman/state/TraceState.scala",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2015-03-02T13:54:15Z",
      "side": 1,
      "message": "A packet could match multiple trace requests. e.g. one trace request to track all requests to port 80, another to trace all requests from ip 1.2.3.4\n\nI\u0027ll change this to an ArrayList with initial size of 1. I would expect there to be only 1 trace request in the most common case.",
      "parentUuid": "7a1969be_f53be699",
      "revId": "91dce0d6dee8a4a9a6fa8114e98705b836ff003b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}