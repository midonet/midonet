{
  "comments": [
    {
      "key": {
        "uuid": "facab960_e3ae842d",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-24T13:37:06Z",
      "side": 1,
      "message": "...and _while_ the load...",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bad4c104_c6505661",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-26T10:31:35Z",
      "side": 1,
      "message": "I don\u0027t think solving this through the Agent is the best approach. I propose instead we have a cluster service running the metadata service, plugged into the virtual topology (at tenant routers or at the provider router/edge router). \n\nWith this solution, the VM packets would be naturally simulated and delivered to the Agent running at the cluster node, which would deliver the packet to the metadata service. Return packets would be naturally delivered back to the VM. \n\nIf we want active/active scalability we can add a load balancer and have multiple such cluster services (although I\u0027m skeptical the metadata service should see so much traffic); in this case the VMs would be configured with the VIP address.\n\nWhat do you think?",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 44,
        "endChar": 15
      },
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ad9bd40_342be6ec",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-29T06:08:54Z",
      "side": 1,
      "message": "what do you mean by \"cluster service\"?\nmidonet-cluster, or something else?\n\nwhat we currently have (q-dhcp, q-meta) work similarly.\nie. the service is plugged into the tenant bridge.\n(via a port called \"dhcp port\")\n\ni agree the point that this doesn\u0027t need to be too scalable.",
      "parentUuid": "bad4c104_c6505661",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 44,
        "endChar": 15
      },
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ad9bd40_57a147a8",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-30T07:43:20Z",
      "side": 1,
      "message": "yes, midonet cluster. now that we have a proper cluster, we can better solve this. no need to involve the agent or put web servers into them.",
      "parentUuid": "9ad9bd40_342be6ec",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 44,
        "endChar": 15
      },
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ad9bd40_f7f41b89",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "If we run this service in midonet-cluster it is basically the same as the neutron way except we do get rid of the DHCP agent (which is an improvement).  So while I\u0027m ok with this approach, the only thing I wonder about is whether this matters to users.  Neutron will have distributed metadata service running on the compute hosts eventually.  If it\u0027s the case that this is a big deal, we should seriously consider doing it on compute.  \n\nThat said, the idea of having a metadata process thread hooked into the virtual device should be the same whether it\u0027s part of the agent or the cluster.  So it will be easy to migrate from one to the other.",
      "parentUuid": "9ad9bd40_57a147a8",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 44,
        "endChar": 15
      },
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ad9bd40_32e4d13a",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-30T09:41:27Z",
      "side": 1,
      "message": "what transport is used between midolman and the cluster service?\ni guess i\u0027m missing something basic.\nare you suggesting something similar to vtep code?",
      "parentUuid": "9ad9bd40_57a147a8",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 44,
        "endChar": 15
      },
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_35e92581",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "typo: agent",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_398547d0",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a1969be_35e92581",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_15eea988",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "typo: isolate",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_59884be7",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a1969be_15eea988",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_75027d3f",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "It would be helpful to provide some diagram that shows the entities involved and flow of events",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_23a5cc46",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-24T13:37:06Z",
      "side": 1,
      "message": "is it possible to have single jetty server or just parse the HTTP requests using http libraries directly? Otherwise this sounds like a lot of threads / jetty servers.",
      "parentUuid": "7a1969be_75027d3f",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_595f6b72",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "I\u0027ll try creating asciiflow images.",
      "parentUuid": "7a1969be_75027d3f",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_55ff8134",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "There are several configurations that should to be specified for neutron metadata agent:http://docs.openstack.org/trunk/config-reference/content/networking-options-metadata.html. Is it applicable here as well?",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_d92b7b92",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "I would say that we start off with the basic default with no options supported.  Then we can start adding them as needed.  We should design it so that it would still work with a separate DHCP/metadata agent until feature parity is achieved.",
      "parentUuid": "7a1969be_55ff8134",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_636a74ef",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 79,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-24T13:37:06Z",
      "side": 1,
      "message": "does \u0027ports\u0027 here mean \u0027tcp ports\u0027, if so, why the need to pre-allocate them statically?",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_434c909e",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-24T13:37:06Z",
      "side": 1,
      "message": "would it make sense to hook this service to the bridges more naturally?",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bad4c104_40a6eec2",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2015-06-25T19:06:27Z",
      "side": 1,
      "message": "would it not make more sense to put a dnat rule on the bridge port chain? what is the harm of this traffic come to userspace? the metadata actions should be relatively uncommon. And if it comes to userspace, that means midolman can handle the lifecycle of the flow just like any other flow. Return flows can also be handled with flow state.",
      "parentUuid": "facab960_434c909e",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_b5fcf53f",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "typo: because",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_79550f4f",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a1969be_b5fcf53f",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_63519435",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-24T13:37:06Z",
      "side": 1,
      "message": "Same here, why not make this service a proper virtual device?",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_4e075418",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-25T07:21:08Z",
      "side": 1,
      "message": "can you explain how a proper virtual device for this purpose would look like?\n\nan exterior port which can bound on multiple hosts?",
      "parentUuid": "facab960_63519435",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dacfb570_645864fb",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-25T15:20:32Z",
      "side": 1,
      "message": "I think it can be designed several ways, this may be one:\n\nVirtually:\n\n* A metadata service is a virtual device. It has a single interior vport which you plug to a bridge. The vport has an IP address and a MAC address. \n\nAlternatives:\n\n* single device, with one vport per network each hooked to the bridge.\n* single device with \u0027dangling\u0027 vports and bridges teleport traffic to them based on a well defined generic service insertion interface.\n* single device with dangling vports and bridges teleport traffic to them based on rules (as proposed in this blueprint) and a new action.\n\nInside details:\n\nEach agent has a single metadata thread. And a set of metadata namespaces plugged to the datapath. One per locally known virtual metadata service. Ideally, if possible it will use the same link-local address on all of those namespaces, if unfeasible we\u0027d resort for static traffic translation as in this proposal. Each time a virtual metadata device receives TCP:80 traffic, it installs a flow to send it to the datapath port it has internally assigned, so it will emerge in the corresponding namespace. The metadata thread will be listening on port 80 with a socket on each namespace, thus able to demux based on socket alone and the same event based thread can handle all http requests in a single select loop.\n\nOn the return path, packets sent by the HTTP metadata thread would come back to userspace, and hit the virtual metadata device, which would send the traffic back to the corresponding bridge.",
      "parentUuid": "facab960_4e075418",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_a24b0158",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-01T04:52:42Z",
      "side": 1,
      "message": "how do you resolve ARP for the return flow?\nesp. when VM addresses overlap?",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_dd7707d3",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-02T02:35:55Z",
      "side": 1,
      "message": "an idea:\nsnat VM ip addresses so that they don\u0027t overlap each other.\nin that way the return flow can work naturally.",
      "parentUuid": "facab960_a24b0158",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_bd16c353",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-02T02:56:37Z",
      "side": 1,
      "message": "I like the idea. I want to clarify some points before updating the spec.  What is the IP address to set for the source IP?  The host IP?",
      "parentUuid": "facab960_dd7707d3",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_a0585633",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-02T03:18:06Z",
      "side": 1,
      "message": "i guess link-local addresses are best for this purpose.",
      "parentUuid": "facab960_bd16c353",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_a083f602",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-02T04:38:09Z",
      "side": 1,
      "message": "So to clarify, we\u0027d pick a link local address for each VM.  We\u0027d add a static NAT flow rules to do:\n\nVM egress: VM source IP -\u003e link local IP\nVM ingress:  link local IP -\u003e VM source IP\n\nlink local IP would be unique for each VM on the host.  Any link local address would do as long as it\u0027s unique on the host (so MM tracks allocated IPs)\n\nThe only design decision left is how we steer the return traffic to the datapath.\n\nSince with metadata traffic, VMs always initiate the connection, so the host OS would correctly set the ARP table entries automatically.  But to be absolutely safe, we would statically set the ARP entries from MM when the NAT flows are inserted.\n\nDid I miss anything?",
      "parentUuid": "facab960_a0585633",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_402b0a94",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-02T06:34:29Z",
      "side": 1,
      "message": "it\u0027s a good summary.  thank you!\n\nbesides that, it might be necessary to research how linux (distros?) routes v4 link-locals.",
      "parentUuid": "facab960_a083f602",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_01e821e1",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-03T05:13:28Z",
      "side": 1,
      "message": "an interesting issue recently fixed in neutron:\nhttps://bugs.launchpad.net/neutron/+bug/1460793",
      "parentUuid": "facab960_402b0a94",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_46c92258",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 97,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-17T02:46:40Z",
      "side": 1,
      "message": "i had some experiment.\n\nwith flows like below and static arp on the host,\ni was able to forward metadata traffic to an ordinary web server running on the hypervisor.\n\nport 6 is a VM port.\n10.0.0.3/fa:16:3e:d0:39:ca are its fixed_ip and mac_address.\n\nport 7 is the veth port manually plugged into the datapath.\nthe other side of the veth pair\u0027s addresses are 169.254.169.254/7e:a0:49:f4:5e:b7 and the web server is\nlistening on it.\n\nodp flows:\nin_port(7),eth_type(0x0800),ipv4(src\u003d169.254.169.254,dst\u003d169.254.1.1,proto\u003d6,frag\u003dno), actions:set(eth(src\u003d7e:a0:49:f4:5e:b7,dst\u003dfa:16:3e:d0:39:ca)),set(ipv4(src\u003d169.254.169.254,dst\u003d10.0.0.3,proto\u003d6,tos\u003d0,ttl\u003d10,frag\u003dno)),6\n\nin_port(6),eth_type(0x0800),ipv4(src\u003d10.0.0.3,dst\u003d169.254.169.254,proto\u003d6,frag\u003dno), actions:set(eth(src\u003dfa:16:3e:d0:39:ca,dst\u003d7e:a0:49:f4:5e:b7)),set(ipv4(src\u003d169.254.1.1,dst\u003d169.254.169.254,proto\u003d6,tos\u003d0,ttl\u003d10,frag\u003dno)),7\n\nstatic arp entry on hypervisor:\n? (169.254.1.1) at fa:16:3e:d0:39:ca [ether] PERM on fuga\n\n(note: proto/tos/ttl/frag stuffs in the above flows are not essential.\nwe can ignore them if we can use masked-set actions.\nunfortunately datapath found in ubuntu 14.04.2 doesn\u0027t seem to support it.)\n\nthe guest was cirros-0.3.4.\nit seems a host-route was injected via dhcp.\n$ ip r\ndefault via 10.0.0.1 dev eth0 \n10.0.0.0/24 dev eth0  src 10.0.0.3 \n169.254.169.254 via 10.0.0.2 dev eth0 \n$ \n\nfor guests which complies RFC 3927 and never send packets to a router, i think the above setup is not enough as arp request for 169.254.169.254 won\u0027t get answer.",
      "parentUuid": "facab960_402b0a94",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_95f9f94f",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "need",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_99501360",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a1969be_95f9f94f",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bad4c104_20d3aa39",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2015-06-25T19:06:27Z",
      "side": 1,
      "message": "assigned",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_5d4cb042",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 123,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-10T04:29:08Z",
      "side": 1,
      "message": "older versions of windows seems to recognize Option 249 instead of 121.  it might worth supporting if we care such VMs.\nhttps://msdn.microsoft.com/en-us/library/cc227282.aspx",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_9d5638d1",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 124,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-10T04:29:08Z",
      "side": 1,
      "message": "some platform notes:\n\nUbuntu 14.04 by default seems to do nothing special to handle link-local addresses.\nit just tries to use the default route. (seems violating RFC 3927 2.6.2)\n\nOS X 10.10.3 has link-local route for 169.254/16.  i don\u0027t know how it choose the interface to bound.\ni\u0027ve heard CentOS5 does the similar but needs confirmation.",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_c326e0cd",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-24T13:37:06Z",
      "side": 1,
      "message": "...same here, I feel if this was a proper virtual device hooked to bridges at the topology level all this ad-hoc code would not be necessary.",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_f595cde4",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 135,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "typo: notified",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_b94f97bc",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 135,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-06-30T08:16:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a1969be_f595cde4",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_d59a5113",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "what if there is no port available?",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_35a00543",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 199,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "Can you please specify the upgrade impact as well?",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_15a50953",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 228,
      "author": {
        "id": 1003470
      },
      "writtenOn": "2015-02-15T09:24:55Z",
      "side": 1,
      "message": "+ instructions on new midonet host agent configuration options",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_bd513cda",
        "filename": "specs/2015.02/metadata_service.rst",
        "patchSetId": 2
      },
      "lineNbr": 228,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2015-06-10T04:29:08Z",
      "side": 1,
      "message": "references:\n\nAWS doc\nhttp://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html\n\nSome interesting neutron bugs\nhttps://bugs.launchpad.net/neutron/+bug/1174657\nhttps://bugs.launchpad.net/neutron/+bug/1460793\nhttps://bugs.launchpad.net/neutron/+bug/1426305",
      "parentUuid": "7a1969be_15a50953",
      "revId": "297b39d4ea6cb6e7e2b12dc51181b3ea75c54063",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}