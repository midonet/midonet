{
  "comments": [
    {
      "key": {
        "uuid": "7a1969be_035501c6",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/BusObserver.scala",
        "patchSetId": 15
      },
      "lineNbr": 119,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-01-29T15:51:32Z",
      "side": 1,
      "message": "It should be safer to do the following calls in opposite order: first remove the previous value, then add the new one (That should ensure that we don\u0027t hit the replicated maps bug - keeping multiple entries -). I also think that we should use \u0027removeIfOwner\u0027 instead of removeIfOwnerAndValue (anyway, there is only one possible mapping to mac to port, and we should remove anything that was in there)\n\nEDIT: following the conversation in the meeting about VTEP HA, it looks like we could have a race condition if we don\u0027t check that the value we are removing is not the old one... So, probably the fix would be making sure that either replicated maps work, or do a synchronized \u0027get/check/remove\u0027...",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 13
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_26ee4b23",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/BusObserver.scala",
        "patchSetId": 15
      },
      "lineNbr": 119,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-01-29T16:52:06Z",
      "side": 1,
      "message": "Rediscussed over this, so summarizing. \n\nThe old code is using removeIfOwnerAndValue in removals, so we\u0027ll keep this. We agree that there are a bunch of races in mac flapping so further patches will be trying to address these.",
      "parentUuid": "7a1969be_035501c6",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 13
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_6381554a",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/BusObserver.scala",
        "patchSetId": 15
      },
      "lineNbr": 120,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-01-29T16:56:02Z",
      "side": 1,
      "message": "isChanged already includes isNew",
      "range": {
        "startLine": 120,
        "startChar": 16,
        "endLine": 120,
        "endChar": 25
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_c395a989",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/BusObserver.scala",
        "patchSetId": 15
      },
      "lineNbr": 135,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-01-29T16:56:02Z",
      "side": 1,
      "message": "s/supresion/suppression",
      "range": {
        "startLine": 135,
        "startChar": 24,
        "endLine": 135,
        "endChar": 33
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_e38c2582",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/MacLocation.scala",
        "patchSetId": 15
      },
      "lineNbr": 69,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-01-29T16:56:02Z",
      "side": 1,
      "message": "Not needed.",
      "range": {
        "startLine": 69,
        "startChar": 25,
        "endLine": 69,
        "endChar": 27
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_43d09953",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/Vtep.scala",
        "patchSetId": 15
      },
      "lineNbr": 117,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-01-29T16:56:02Z",
      "side": 1,
      "message": "Not a strong opinion, but why not get (plus the fish name is a bit ambiguous as to its purpose)? However, is fine leaving it like this.",
      "range": {
        "startLine": 117,
        "startChar": 8,
        "endLine": 117,
        "endChar": 20
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_a3c06d7d",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/VtepController.scala",
        "patchSetId": 15
      },
      "lineNbr": 107,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-01-29T16:56:02Z",
      "side": 1,
      "message": "NSDB",
      "range": {
        "startLine": 107,
        "startChar": 55,
        "endLine": 107,
        "endChar": 59
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_4337f9b0",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/VtepController.scala",
        "patchSetId": 15
      },
      "lineNbr": 150,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-01-29T16:56:02Z",
      "side": 1,
      "message": "Should the VxlanGateway class implement equals and hashCode?",
      "range": {
        "startLine": 150,
        "startChar": 52,
        "endLine": 150,
        "endChar": 56
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_239abd14",
        "filename": "brain/midonet-brain/src/main/scala/org/midonet/brain/services/vxgw/VtepController.scala",
        "patchSetId": 15
      },
      "lineNbr": 203,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-01-29T15:51:32Z",
      "side": 1,
      "message": "missing a comment indicating that \u0027abandon\u0027 and \u0027join\u0027 will be called from the same thread, so there are no race conditions",
      "range": {
        "startLine": 203,
        "startChar": 17,
        "endLine": 203,
        "endChar": 24
      },
      "revId": "9317fb17e416860a582ddc6d434d9414d64ffeb1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}