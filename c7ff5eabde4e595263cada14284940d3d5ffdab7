{
  "comments": [
    {
      "key": {
        "uuid": "7a1969be_854b9558",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-02-10T06:48:07Z",
      "side": 1,
      "message": "Is this ID required? Neutron wouldn\u0027t be sending that id field.",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_c5746d9e",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T06:52:30Z",
      "side": 1,
      "message": "It\u0027s a requirement by Zoom, which requires all the models to have an \"id\" field to be persisted via Zoom. If we want to keep this data around in ZK, we need this field. It\u0027s fine that Neutron does not populate it, the translator can fill in whatever we think is appropriate (most likely a host ID).",
      "parentUuid": "7a1969be_854b9558",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_206f2f94",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-02-10T14:39:26Z",
      "side": 1,
      "message": "I guess it should be required then no? and whatever value we decide to have, should be added by neutron. Otherwise we\u0027re making additions to the model behind the scenes and the authoritative source of data is neutron after all.",
      "parentUuid": "7a1969be_c5746d9e",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_00279365",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T15:02:46Z",
      "side": 1,
      "message": "ID is not necessary in the sense that this PortBinding doesn\u0027t really need to be stored in ZK. Coming to think about it, it should be populated by neutron to whichever value it think is suitable (most likely host ID?).\n\nThat we keep id and other fields \"optional\" is for a different, more or less practical reason. I.e., if we make the id field \"required\", it needs to be populated at the time of building, but it\u0027s more convenient to be able to pass around partially constructed objects.",
      "parentUuid": "7a1969be_206f2f94",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_40e7cb12",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2015-02-10T15:10:09Z",
      "side": 1,
      "message": "Does it have to be globally unique?  Host could have multiple bindings, so we\u0027d could end up with multiple tasks with the same host ID but different bindings.  Port ID on the other hand, might be better since a port can be bound to only one host + interface pair.  But I guess it remains true that there must be a field called \u0027id\u0027 here and it must be populated?",
      "parentUuid": "7a1969be_00279365",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_0084b3d2",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T16:01:14Z",
      "side": 1,
      "message": "That\u0027s a good point. It has to be unique per port binding. Therefore, I guess we need Neutron to assign a random UUID and set it to \"id\" and we should also add back references to port binding with both host and port. I\u0027ll make that change shortly.",
      "parentUuid": "7a1969be_40e7cb12",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_4054eb53",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T16:10:58Z",
      "side": 1,
      "message": "With a second thought, I think that all we want is to be able to debug. The current Topology model definitions already allow us to track port-binding from host. I think that\u0027s good enough for now. If we want, we can add back references with (MidoNet) port to port binding. Thus we don\u0027t really need to store PortBinding here itself, so let\u0027s forget about storing this ZooKeeper. This requires a slight change with C3PO, but should be fine.",
      "parentUuid": "7a1969be_0084b3d2",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_dec8bb76",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-02-11T21:53:21Z",
      "side": 1,
      "message": "Were we not going to store all neutron protos in ZK (for debugging and auditing purposes)?\n\nIMO if adding the id from neutron isn\u0027t a great cost, I\u0027d prefer adding them. Been burned a enough times already by not having standard ids :D",
      "parentUuid": "7a1969be_4054eb53",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_fe301758",
        "filename": "cluster/src/main/proto/neutron.proto",
        "patchSetId": 1
      },
      "lineNbr": 220,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-11T23:16:03Z",
      "side": 1,
      "message": "Adding an ID means that the Neutron side needs to manage it. That is, when it wants to delete the binding it needs to set the corresponding ID, but currently the Neutron side doesn\u0027t maintain such info and is unable to do that. The translator, therefore, would need to search through the list of bindings and find the corresponding entry / ID. That\u0027s certainly possible but seems like a cumbersome thing to do just for debugging. I\u0027ll go with this version for now. Please let me know if you think that it\u0027d be better to have this model in ZooKeeper.",
      "parentUuid": "7a1969be_dec8bb76",
      "revId": "c7ff5eabde4e595263cada14284940d3d5ffdab7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}