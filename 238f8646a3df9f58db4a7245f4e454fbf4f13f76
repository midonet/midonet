{
  "comments": [
    {
      "key": {
        "uuid": "1ae5cdf2_bbf44788",
        "filename": "cluster/midonet-cluster/src/main/java/org/midonet/southbound/vtep/schema/Table.java",
        "patchSetId": 5
      },
      "lineNbr": 263,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "Wasn\u0027t this what the vtep emulator was rejecting?",
      "range": {
        "startLine": 260,
        "startChar": 0,
        "endLine": 263,
        "endChar": 9
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_50bb1ac4",
        "filename": "cluster/midonet-cluster/src/main/java/org/midonet/southbound/vtep/schema/Table.java",
        "patchSetId": 5
      },
      "lineNbr": 263,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-09-07T13:47:57Z",
      "side": 1,
      "message": "Yes. At the beginning I wasn\u0027t exactly sure whether this the entry ID can be specified for some rows, and that was the reason to leave it here. Now I changed this to support the use of `uuid-name` during the same transaction (the `uuid-name`",
      "parentUuid": "1ae5cdf2_bbf44788",
      "range": {
        "startLine": 260,
        "startChar": 0,
        "endLine": 263,
        "endChar": 9
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ae8d1ca_4b9a9115",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 52,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "The owner tag was useful only for the \u0027hint\u0027 mechamism. If \u0027hint\u0027 operations are removed, there is no need to encapsulate the Entry into a Data class.",
      "range": {
        "startLine": 52,
        "startChar": 4,
        "endLine": 52,
        "endChar": 46
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ae8d1ca_eb927df5",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 59,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "Also here, the \u0027List\u0027 in the value existed only to keep several \u0027hints\u0027. If the \u0027hint\u0027 operations are removed, they serve no other purpose and the definition could be changed into:\n\nprivate var map: Map[UUID, Entry] \u003d Map()\n\nor, even better:\n\nprivate val map: ConcurrentHashMap[UUID, Entry] \u003d ...",
      "range": {
        "startLine": 59,
        "startChar": 21,
        "endLine": 59,
        "endChar": 42
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ae8d1ca_2bbc656c",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 72,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "if map is changed into a ConcurrentHashMap, change into:\n\nmap.clear()",
      "range": {
        "startLine": 72,
        "startChar": 16,
        "endLine": 72,
        "endChar": 31
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ae8d1ca_4bc1b1e3",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 77,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 77,
        "startChar": 16,
        "endLine": 77,
        "endChar": 31
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ae8d1ca_8bbbb971",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 84,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "if changed into ConcurrentHashMap, then change to\nmap.remove(row.uuid)",
      "range": {
        "startLine": 84,
        "startChar": 20,
        "endLine": 84,
        "endChar": 40
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ae8d1ca_0ba7a950",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 88,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "if changed into ConcurrentHashMap, then change to\nmap.put(row.uuid, row)",
      "range": {
        "startLine": 88,
        "startChar": 20,
        "endLine": 88,
        "endChar": 71
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_fb45efb3",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 109,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "change into\n\nOption(map.get(id))",
      "range": {
        "startLine": 109,
        "startChar": 48,
        "endLine": 109,
        "endChar": 77
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_3b1757a5",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbCachedTable.scala",
        "patchSetId": 5
      },
      "lineNbr": 110,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "change into\n\nmap.asScala.toMap (to make it immutable)",
      "range": {
        "startLine": 110,
        "startChar": 44,
        "endLine": 110,
        "endChar": 71
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_3e658545",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbVtepData.scala",
        "patchSetId": 5
      },
      "lineNbr": 124,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "I think I remember some issue in the field where they had several physical switches defined... is that not being allowed anymore?",
      "range": {
        "startLine": 120,
        "startChar": 12,
        "endLine": 124,
        "endChar": 28
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_3e1d8574",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbVtepData.scala",
        "patchSetId": 5
      },
      "lineNbr": 144,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "there is a potential race condition here:\nif two logical switchs with the same name and vni are created fast enough, there is a chance of the second request arriving before the table has been updated... then will go through the \u0027case None\u0027 and end up creating a duplicated physical switch (or an exception if they uuid is set to the same value, which I think is not allowed...)",
      "range": {
        "startLine": 144,
        "startChar": 7,
        "endLine": 144,
        "endChar": 37
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_011a2e6e",
        "filename": "cluster/midonet-cluster/src/main/scala/org/midonet/southbound/vtep/OvsdbVtepData.scala",
        "patchSetId": 5
      },
      "lineNbr": 160,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "another small chance of race condition here, if we delete the logical switch right after creating it and before the local cache has been updated. Probably we should emit the delete operation anyway, and generate the exception based on the operation return.",
      "range": {
        "startLine": 160,
        "startChar": 16,
        "endLine": 160,
        "endChar": 37
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_413c3694",
        "filename": "cluster/midonet-cluster/src/test/scala/org/midonet/southbound/vtep/OvsdbCachedTableTest.scala",
        "patchSetId": 5
      },
      "lineNbr": 124,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "Maybe a simple test for select could be added",
      "range": {
        "startLine": 124,
        "startChar": 5,
        "endLine": 124,
        "endChar": 24
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ae5cdf2_a1c33a89",
        "filename": "nsdb/src/main/scala/org/midonet/cluster/data/vtep/model/PhysicalPort.scala",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1002750
      },
      "writtenOn": "2015-09-04T18:04:13Z",
      "side": 1,
      "message": "This should be just \u0027id\u0027 if we don\u0027t want to force non-null uuids...",
      "range": {
        "startLine": 45,
        "startChar": 24,
        "endLine": 45,
        "endChar": 65
      },
      "revId": "238f8646a3df9f58db4a7245f4e454fbf4f13f76",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}