{
  "comments": [
    {
      "key": {
        "uuid": "7a6b29fe_9a794696",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1002820
      },
      "writtenOn": "2014-11-06T16:41:34Z",
      "side": 1,
      "message": "indentation",
      "range": {
        "startLine": 47,
        "startChar": 54,
        "endLine": 47,
        "endChar": 79
      },
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_3a963295",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2014-11-06T16:58:59Z",
      "side": 1,
      "message": "Here is fine, isn\u0027t it?",
      "parentUuid": "7a6b29fe_9a794696",
      "range": {
        "startLine": 47,
        "startChar": 54,
        "endLine": 47,
        "endChar": 79
      },
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_5ae4ce3a",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2014-11-06T17:08:47Z",
      "side": 1,
      "message": "It is.",
      "parentUuid": "7a6b29fe_3a963295",
      "range": {
        "startLine": 47,
        "startChar": 54,
        "endLine": 47,
        "endChar": 79
      },
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_bad08254",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2014-11-06T17:08:47Z",
      "side": 1,
      "message": "I think I prefer the explicit invalidate call, because we must also invalidate on error and on completion.",
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_7abeea00",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2014-11-06T17:16:28Z",
      "side": 1,
      "message": "Yes, make sense. I\u0027d better add a method just for this.",
      "parentUuid": "7a6b29fe_bad08254",
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_9ad5c645",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 83,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2014-11-06T17:08:47Z",
      "side": 1,
      "message": "Could we have:\n\n    private val subscription \u003d observable.doOnEach(tap).subscribe(inStream)\n    outStream \u003d inStream.doOnEach(tap).doOnSubscribe(...).doOnUnsubscribe(...)\n\nI\u0027m missing the point of the intermediate tappedStream, I think.",
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_9a3ca695",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 83,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2014-11-06T17:16:28Z",
      "side": 1,
      "message": "if we add the tap as show in the second line:\n\n  outStream \u003d inStream.doOnEach(tap).doOnSubscribe(...).doOnUnsubscribe(...)\n\nthen, the tap methods will be executed for each subscriber (e.g. if the stream has 10 subscribers, for a device update the tap.onNext(...) method is called 10 times)\n\nThe tappedStream subject is supposed to insulate the tap from the subscriber stream. I wish it was a better way.\n\nAlthough now I think we can remove the inStream, since we don\u0027t need that subject anymore (initially it was used as the cache). I\u0027ll examine it again see if we can get rid of it.",
      "parentUuid": "7a6b29fe_9ad5c645",
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_3a4bd22c",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/DeviceObservable.scala",
        "patchSetId": 3
      },
      "lineNbr": 83,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2014-11-06T17:20:17Z",
      "side": 1,
      "message": "sorry, the doOnEach in the second line is wrong, consider only the doOnEach on the first line. so it would be:\n\n    private val subscription \u003d observable.doOnEach(tap).subscribe(inStream)\n    outStream \u003d inStream.doOnSubscribe(...).doOnUnsubscribe(...)\n\nthe fact that they are behavioursubjects and cache the element invalidates my solution to gc the virtual topology, I think. we\u0027ll deal with it later though :p",
      "parentUuid": "7a6b29fe_9a3ca695",
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_1aac16ed",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/VirtualTopology.scala",
        "patchSetId": 3
      },
      "lineNbr": 170,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2014-11-06T16:47:03Z",
      "side": 1,
      "message": "+        classTag[Port] -\u003e ((id: UUID) \u003d\u003e new PortObservable(id, store, this)),\n+        classTag[RouterPort] -\u003e ((id: UUID) \u003d\u003e new PortObservable(id, store, this)),\n+        classTag[BridgePort] -\u003e ((id: UUID) \u003d\u003e new PortObservable(id, store, this)),\n+        classTag[VxLanPort] -\u003e ((id: UUID) \u003d\u003e new PortObservable(id, store, this))",
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_1a9376a4",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/VirtualTopology.scala",
        "patchSetId": 3
      },
      "lineNbr": 170,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2014-11-06T16:58:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a6b29fe_1aac16ed",
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_3a68f2b9",
        "filename": "midolman/src/test/scala/org/midonet/midolman/topology/DeviceObservableTest.scala",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1002820
      },
      "writtenOn": "2014-11-06T16:41:34Z",
      "side": 1,
      "message": "I was not able to compile this class. Is mockit missing from the dependencies in the build.gradle file?",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 27,
        "endChar": 20
      },
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_7a90aa95",
        "filename": "midolman/src/test/scala/org/midonet/midolman/topology/DeviceObservableTest.scala",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2014-11-06T16:58:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a6b29fe_3a68f2b9",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 27,
        "endChar": 20
      },
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_1a3ed6b8",
        "filename": "midolman/src/test/scala/org/midonet/midolman/topology/DeviceObservableTest.scala",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1002820
      },
      "writtenOn": "2014-11-06T16:41:34Z",
      "side": 1,
      "message": "indentation",
      "range": {
        "startLine": 61,
        "startChar": 34,
        "endLine": 61,
        "endChar": 64
      },
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_5a8dee7a",
        "filename": "midolman/src/test/scala/org/midonet/midolman/topology/DeviceObservableTest.scala",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2014-11-06T16:58:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a6b29fe_1a3ed6b8",
      "range": {
        "startLine": 61,
        "startChar": 34,
        "endLine": 61,
        "endChar": 64
      },
      "revId": "e894341e2b93422f91e7385250e49cba35eb51f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}