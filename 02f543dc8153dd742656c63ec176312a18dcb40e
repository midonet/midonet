{
  "comments": [
    {
      "key": {
        "uuid": "facab960_9772a87a",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-05T13:49:12Z",
      "side": 1,
      "message": "1 \u003c\u003c 6 - 1 to know how many bits are set to 1?",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_e2c41042",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-05T16:26:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "facab960_9772a87a",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_b76dec9b",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-05T13:49:12Z",
      "side": 1,
      "message": "\u003e\u003e\u003e so it\u0027s unsigned extension",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_02c01429",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-05T16:26:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "facab960_b76dec9b",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_779d2459",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 157,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-05T13:49:12Z",
      "side": 1,
      "message": "I think the use of polymorphism here is not really needed, since you can do a simple loop where you start with 24 and decrement 8 at each step to obtain the shift, and then as a last step you call the \"terminal\" deletePrefix method. That first loop can be avoided and we also save the expensive interface polymorphism. I\u0027m willing to be my pinky finger it will give a nice perf boost.",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_c221ccfd",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 157,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-05T16:26:52Z",
      "side": 1,
      "message": "Polymorphism is needed because the last layer holds ints and not nodes, making the typing of nodes in this data structure heterogenous. \n\nYes the code can be rolled out, to much ugliness. So I\u0027m not promising anything on this front.\n\nAlso this requests feels like stepping on the feet of the JIT \u0026 compiler.",
      "parentUuid": "facab960_779d2459",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_3d3b7d9d",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 157,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-05T18:44:38Z",
      "side": 1,
      "message": "hum... but you can loop while it\u0027s bigger than 0, calling one deletePrefix. then outside of the loop, you call the other deletePrefix. the jit will love this (it can unroll the loop). what it doesn\u0027t love is a lot of polymorphic calls i think it won\u0027t inline :/",
      "parentUuid": "facab960_c221ccfd",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_a5e12f00",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 157,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-06T00:18:32Z",
      "side": 1,
      "message": "You realize this doesn\u0027t run per packet, but on flow invalidation, right?\n\nThe benchmarks don\u0027t even measure this for that reason.",
      "parentUuid": "facab960_3d3b7d9d",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_17a218ae",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-05T13:49:12Z",
      "side": 1,
      "message": "could these be pre-filled?",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_22def811",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-05T16:26:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "facab960_17a218ae",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_17893826",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-05T13:49:12Z",
      "side": 1,
      "message": "if (...) { cleanIfEmpty() } ?",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_17613839",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1002763
      },
      "writtenOn": "2015-06-05T14:11:14Z",
      "side": 1,
      "message": "Nope, cleanIfEmpty doesn\u0027t take a mask. deletePrefix() cleans up on the spot as it walks the trie.",
      "parentUuid": "facab960_17893826",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_62ac80a1",
        "filename": "midonet-util/src/main/scala/org/midonet/util/collection/IPv4InvalidationArray.scala",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1002754
      },
      "writtenOn": "2015-06-05T15:55:09Z",
      "side": 1,
      "message": "ah, it\u0027s true, it\u0027s in the other deleteIfPrefix",
      "parentUuid": "facab960_17613839",
      "revId": "02f543dc8153dd742656c63ec176312a18dcb40e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}