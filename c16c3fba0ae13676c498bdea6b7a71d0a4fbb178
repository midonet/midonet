{
  "comments": [
    {
      "key": {
        "uuid": "facab960_d1f48e89",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1002820
      },
      "writtenOn": "2015-05-20T13:21:42Z",
      "side": 1,
      "message": "Without reading the code, it\u0027s hard to understand what this patch is trying to do. Could you please clarify this?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 8
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a106d94_9a43266b",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/VirtualTopologyActor.scala",
        "patchSetId": 6
      },
      "lineNbr": 360,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-05-14T09:26:42Z",
      "side": 1,
      "message": "wouldn\u0027t it be possible that an unanswered client is waiting for a reply on this device? should we try to clean the 3 maps either way, before deciding whether to return?",
      "range": {
        "startLine": 360,
        "startChar": 25,
        "endLine": 360,
        "endChar": 31
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a106d94_89b3e208",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/VirtualTopologyActor.scala",
        "patchSetId": 6
      },
      "lineNbr": 360,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-05-15T08:44:42Z",
      "side": 1,
      "message": "\u0027id\u0027 should either be present in both maps - when the device exists - or not - when it doesn\u0027t. This check was mainly done to accommodate the cleanup performed by the new topology when a device is deleted (either by onCompleted or onError) - the old VTA does not perform any cleanup. If a device is deleted, then id should be evicted from both maps at the same time.",
      "parentUuid": "1a106d94_9a43266b",
      "range": {
        "startLine": 360,
        "startChar": 25,
        "endLine": 360,
        "endChar": 31
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_f14d12c6",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/VirtualTopologyActor.scala",
        "patchSetId": 6
      },
      "lineNbr": 360,
      "author": {
        "id": 1002820
      },
      "writtenOn": "2015-05-20T13:21:42Z",
      "side": 1,
      "message": "I know the code did not previously notify the subscribers but would it not be better to do it?",
      "parentUuid": "1a106d94_89b3e208",
      "range": {
        "startLine": 360,
        "startChar": 25,
        "endLine": 360,
        "endChar": 31
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_d121eeb5",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/VirtualTopologyActor.scala",
        "patchSetId": 6
      },
      "lineNbr": 360,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-05-20T13:51:44Z",
      "side": 1,
      "message": "Is it worth adding a v2.x feature to v1.x code? `deviceError` and `deviceDeleted` will only be used when using v2.x storage, and for that subscribers should subscribe to the VT observable directly rather than via the VTA/VTRedirector.\n\nEven if we add support for Error/Deleted messages to all the actors currently subscribing to the VTA, currently those notifications wouldn\u0027t be used for anything (maybe except logging), and any change that would benefit from them would probably be a sizable refactor of agent code.\n\nIn my opinion, I think it\u0027s better to refactor the agent to use the VT directly. Anyway, thanks for raising this point, and I\u0027m open to discussion/suggestions.\n\nNote: Below I\u0027m using a trick to complete the futures for tryAsk as soon as an error occurred, rather that allowing the futures to expire, which was the default behavior previously.",
      "parentUuid": "facab960_f14d12c6",
      "range": {
        "startLine": 360,
        "startChar": 25,
        "endLine": 360,
        "endChar": 31
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a106d94_3a503231",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/devices/Port.scala",
        "patchSetId": 6
      },
      "lineNbr": 231,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-05-14T09:26:42Z",
      "side": 1,
      "message": "restore the NPE check?",
      "range": {
        "startLine": 231,
        "startChar": 19,
        "endLine": 231,
        "endChar": 29
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a106d94_a9e4de0c",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/devices/Port.scala",
        "patchSetId": 6
      },
      "lineNbr": 231,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-05-15T08:44:42Z",
      "side": 1,
      "message": "Previously the NPE check was to call `routeIds.toSeq`. Isn\u0027t it .toSeq redundant? If so, string interpolation should handle null, isn\u0027t it?",
      "parentUuid": "1a106d94_3a503231",
      "range": {
        "startLine": 231,
        "startChar": 19,
        "endLine": 231,
        "endChar": 29
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_91d686c4",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/devices/Port.scala",
        "patchSetId": 6
      },
      "lineNbr": 231,
      "author": {
        "id": 1002820
      },
      "writtenOn": "2015-05-20T13:21:42Z",
      "side": 1,
      "message": "if routeIds is null it should just print null.",
      "parentUuid": "1a106d94_a9e4de0c",
      "range": {
        "startLine": 231,
        "startChar": 19,
        "endLine": 231,
        "endChar": 29
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a106d94_89d63dc2",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/devices/Port.scala",
        "patchSetId": 6
      },
      "lineNbr": 231,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-05-20T13:49:19Z",
      "side": 1,
      "message": "You\u0027re right.",
      "parentUuid": "1a106d94_a9e4de0c",
      "range": {
        "startLine": 231,
        "startChar": 19,
        "endLine": 231,
        "endChar": 29
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_5c041515",
        "filename": "midolman/src/main/scala/org/midonet/midolman/topology/devices/Port.scala",
        "patchSetId": 6
      },
      "lineNbr": 231,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-05-20T13:51:44Z",
      "side": 1,
      "message": "Then, this change is okay, right?",
      "parentUuid": "1a106d94_89d63dc2",
      "range": {
        "startLine": 231,
        "startChar": 19,
        "endLine": 231,
        "endChar": 29
      },
      "revId": "c16c3fba0ae13676c498bdea6b7a71d0a4fbb178",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}