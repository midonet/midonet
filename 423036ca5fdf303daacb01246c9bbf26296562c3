{
  "comments": [
    {
      "key": {
        "uuid": "baa041b7_2f47f54c",
        "filename": "midolman/src/main/java/org/midonet/services/agent_rest_api/hacks/UnixDomainServerConnector.java",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-06-09T13:53:14Z",
      "side": 1,
      "message": "I\u0027m missing some context as to why we need all these hacks. Is it for performance reasons? Conflict with some other dependency? Can you add an explanation to the commit message?\n\nWe already have a rest api based on jersey that doesn\u0027t need these hacks? What\u0027s the difference here?",
      "range": {
        "startLine": 86,
        "startChar": 13,
        "endLine": 86,
        "endChar": 38
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_e7cff127",
        "filename": "midolman/src/main/java/org/midonet/services/agent_rest_api/hacks/UnixDomainServerConnector.java",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-10T07:15:38Z",
      "side": 1,
      "message": "we have a rest api, but a rest api using unix domain socket is new.\ni\u0027ll add an explanation somewhere.",
      "parentUuid": "baa041b7_2f47f54c",
      "range": {
        "startLine": 86,
        "startChar": 13,
        "endLine": 86,
        "endChar": 38
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_27303907",
        "filename": "midolman/src/main/java/org/midonet/services/agent_rest_api/hacks/UnixDomainServerConnector.java",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1003057
      },
      "writtenOn": "2016-06-10T07:58:51Z",
      "side": 1,
      "message": "We need a REST API through unix socket file that is owned by the \u0027midonet\u0027 group so that only services belonging to the \u0027midonet\u0027 group in the machine can make rest requests to the minion. Otherwise we\u0027d need to deal with another layer of authentication and it would be detrimental to the UX",
      "parentUuid": "baa041b7_e7cff127",
      "range": {
        "startLine": 86,
        "startChar": 13,
        "endLine": 86,
        "endChar": 38
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_db95dd88",
        "filename": "midolman/src/main/java/org/midonet/services/agent_rest_api/hacks/UnixDomainServerConnector.java",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-14T07:16:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baa041b7_e7cff127",
      "range": {
        "startLine": 86,
        "startChar": 13,
        "endLine": 86,
        "endChar": 38
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_af71c5aa",
        "filename": "midolman/src/main/java/org/midonet/services/agent_rest_api/hacks/UnixDomainServerConnector.java",
        "patchSetId": 3
      },
      "lineNbr": 106,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-06-09T13:53:14Z",
      "side": 1,
      "message": "A bunch of trailing spaces here and below.",
      "range": {
        "startLine": 106,
        "startChar": 82,
        "endLine": 106,
        "endChar": 83
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_a76c4937",
        "filename": "midolman/src/main/java/org/midonet/services/agent_rest_api/hacks/UnixDomainServerConnector.java",
        "patchSetId": 3
      },
      "lineNbr": 106,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-10T07:15:38Z",
      "side": 1,
      "message": "i won\u0027t make cosmetic changes to this file because i want to keep the diff from the original minimum.",
      "parentUuid": "baa041b7_af71c5aa",
      "range": {
        "startLine": 106,
        "startChar": 82,
        "endLine": 106,
        "endChar": 83
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_6f361de9",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 290,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-06-09T13:53:14Z",
      "side": 1,
      "message": "Add the logger.",
      "range": {
        "startLine": 290,
        "startChar": 8,
        "endLine": 290,
        "endChar": 52
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_47733d16",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 290,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-10T07:15:38Z",
      "side": 1,
      "message": "i followed the pattern of flowstate.  does it need the logger too?",
      "parentUuid": "baa041b7_6f361de9",
      "range": {
        "startLine": 290,
        "startChar": 8,
        "endLine": 290,
        "endChar": 52
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_49c7d964",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 421,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2016-06-09T09:23:58Z",
      "side": 1,
      "message": "I suggest you call it the binding_api for now, since there\u0027s nothing else using it, and probably shouldn\u0027t be in the future.",
      "range": {
        "startLine": 421,
        "startChar": 8,
        "endLine": 421,
        "endChar": 22
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_a901c56c",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 421,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-09T09:47:30Z",
      "side": 1,
      "message": "i prefer a generic name even if there will be no other users.",
      "parentUuid": "baa041b7_49c7d964",
      "range": {
        "startLine": 421,
        "startChar": 8,
        "endLine": 421,
        "endChar": 22
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_6f0f3d2f",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 421,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-06-09T13:53:14Z",
      "side": 1,
      "message": "I don\u0027t have a strong opinion but I also feel that rest_api is too generic for the agent, I mean the agent agent should run only some very specific services. It also seems confusing with the MidoNet REST API that runs at the cluster.\n\nIn addition, the \"agent_\" prefix seems redundant: this is agent.conf and everything is already prefixed by \"agent\"",
      "range": {
        "startLine": 421,
        "startChar": 8,
        "endLine": 421,
        "endChar": 15
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_07641547",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 421,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-10T07:15:38Z",
      "side": 1,
      "message": "i thought it was confusing with cluster\u0027s rest_api.\nbut removing the prefix is fine for me.",
      "parentUuid": "baa041b7_6f0f3d2f",
      "range": {
        "startLine": 421,
        "startChar": 8,
        "endLine": 421,
        "endChar": 15
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_3b2a897f",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 421,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-14T07:16:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baa041b7_07641547",
      "range": {
        "startLine": 421,
        "startChar": 8,
        "endLine": 421,
        "endChar": 15
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_61c4e25e",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 421,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2016-06-14T13:24:10Z",
      "side": 1,
      "message": "I prefer a non-generic name, because we want to discourage people putting rest apis on the agent. This is a special case, to get around the need for locks and neutron not writing the binding directly itself. Otherwise, noone should be putting rest apis on the agent.",
      "parentUuid": "baa041b7_3b2a897f",
      "range": {
        "startLine": 421,
        "startChar": 8,
        "endLine": 421,
        "endChar": 15
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_81495133",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 427,
      "author": {
        "id": 1003057
      },
      "writtenOn": "2016-06-03T10:58:41Z",
      "side": 1,
      "message": "I would suggest /var/run/midonet.sock. Otherwise you have to have code needlessly creating the /var/run/midolman directory (systemd can handle that for you though).",
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_0abf9161",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 427,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-07T04:45:26Z",
      "side": 1,
      "message": "i tend to think it\u0027s simpler to have a directory because it\u0027s cumbersome to tweak unix domain socket\u0027s permission, especially with java.",
      "parentUuid": "baa041b7_81495133",
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_7023aabd",
        "filename": "midolman/src/main/resources/org/midonet/conf/schemas/agent.conf",
        "patchSetId": 3
      },
      "lineNbr": 427,
      "author": {
        "id": 1003057
      },
      "writtenOn": "2016-06-07T09:55:31Z",
      "side": 1,
      "message": "very well ;-)",
      "parentUuid": "baa041b7_0abf9161",
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_8f3961db",
        "filename": "midolman/src/main/scala/org/midonet/midolman/config/MidolmanConfig.scala",
        "patchSetId": 3
      },
      "lineNbr": 242,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-06-09T13:53:14Z",
      "side": 1,
      "message": "So like commented in agent.conf the \"Agent\" prefix seems redundant.",
      "range": {
        "startLine": 242,
        "startChar": 6,
        "endLine": 242,
        "endChar": 11
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_fb2301a6",
        "filename": "midolman/src/main/scala/org/midonet/midolman/config/MidolmanConfig.scala",
        "patchSetId": 3
      },
      "lineNbr": 242,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-14T07:16:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baa041b7_8f3961db",
      "range": {
        "startLine": 242,
        "startChar": 6,
        "endLine": 242,
        "endChar": 11
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_09a0b1a4",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/AgentRestApiService.scala",
        "patchSetId": 3
      },
      "lineNbr": 112,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2016-06-09T09:23:58Z",
      "side": 1,
      "message": "Unnecessary. Minions extend guava AbstractServices which already take care of all synchronization.\n\nhttps://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/AbstractService.java",
      "range": {
        "startLine": 112,
        "startChar": 13,
        "endLine": 112,
        "endChar": 25
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_69cdfd5c",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/AgentRestApiService.scala",
        "patchSetId": 3
      },
      "lineNbr": 112,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-09T09:47:30Z",
      "side": 1,
      "message": "i see.  i\u0027ll remove.",
      "parentUuid": "baa041b7_09a0b1a4",
      "range": {
        "startLine": 112,
        "startChar": 13,
        "endLine": 112,
        "endChar": 25
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_bb3699e5",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/AgentRestApiService.scala",
        "patchSetId": 3
      },
      "lineNbr": 112,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-14T07:16:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baa041b7_69cdfd5c",
      "range": {
        "startLine": 112,
        "startChar": 13,
        "endLine": 112,
        "endChar": 25
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_4f3359f7",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/BindingHandler.scala",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-06-09T13:53:14Z",
      "side": 1,
      "message": "Needed?",
      "range": {
        "startLine": 45,
        "startChar": 4,
        "endLine": 45,
        "endChar": 16
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_5b4c2d76",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/BindingHandler.scala",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-14T07:16:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baa041b7_4f3359f7",
      "range": {
        "startLine": 45,
        "startChar": 4,
        "endLine": 45,
        "endChar": 16
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_afa8a5dc",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/BindingHandler.scala",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-06-09T13:56:07Z",
      "side": 1,
      "message": "Why not bind the binder in Guice instead of creating a new instance for every call?",
      "range": {
        "startLine": 48,
        "startChar": 29,
        "endLine": 48,
        "endChar": 43
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_87694528",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/BindingHandler.scala",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-10T07:15:38Z",
      "side": 1,
      "message": "my understanding is it\u0027s created just once as BindingHandler is a singleton.",
      "parentUuid": "baa041b7_afa8a5dc",
      "range": {
        "startLine": 48,
        "startChar": 29,
        "endLine": 48,
        "endChar": 43
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_a9b785f4",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/hacks/UnixDomainSocketChannel.scala",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 1003555
      },
      "writtenOn": "2016-06-09T09:23:58Z",
      "side": 1,
      "message": "which assumptions?",
      "range": {
        "startLine": 33,
        "startChar": 49,
        "endLine": 33,
        "endChar": 60
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baa041b7_a9eae5aa",
        "filename": "midolman/src/main/scala/org/midonet/services/agent_rest_api/hacks/UnixDomainSocketChannel.scala",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 1002897
      },
      "writtenOn": "2016-06-09T09:47:30Z",
      "side": 1,
      "message": "jetty assumes ServerSocketChannel/SocketChannel, where what we have is AbstractSelectableChannel.",
      "parentUuid": "baa041b7_a9b785f4",
      "range": {
        "startLine": 33,
        "startChar": 49,
        "endLine": 33,
        "endChar": 60
      },
      "revId": "423036ca5fdf303daacb01246c9bbf26296562c3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}