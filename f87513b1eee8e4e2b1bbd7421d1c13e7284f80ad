{
  "comments": [
    {
      "key": {
        "uuid": "7a1969be_e52b692e",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/Storage.scala",
        "patchSetId": 33
      },
      "lineNbr": 341,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T16:46:18Z",
      "side": 1,
      "message": "Always \"and\"?",
      "range": {
        "startLine": 341,
        "startChar": 25,
        "endLine": 341,
        "endChar": 31
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_ccdbf119",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/Storage.scala",
        "patchSetId": 33
      },
      "lineNbr": 341,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-12T17:40:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a1969be_e52b692e",
      "range": {
        "startLine": 341,
        "startChar": 25,
        "endLine": 341,
        "endChar": 31
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_251d8110",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/Storage.scala",
        "patchSetId": 33
      },
      "lineNbr": 349,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T16:46:18Z",
      "side": 1,
      "message": "\"last\" performing.",
      "range": {
        "startLine": 349,
        "startChar": 54,
        "endLine": 349,
        "endChar": 64
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_0c05097a",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/Storage.scala",
        "patchSetId": 33
      },
      "lineNbr": 349,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-12T17:40:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a1969be_251d8110",
      "range": {
        "startLine": 349,
        "startChar": 54,
        "endLine": 349,
        "endChar": 64
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_8058a357",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 494,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T16:46:18Z",
      "side": 1,
      "message": "Is it correct?",
      "range": {
        "startLine": 493,
        "startChar": 21,
        "endLine": 494,
        "endChar": 30
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_acf9554f",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 494,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-12T17:40:25Z",
      "side": 1,
      "message": "This is for backwards compatibility with the non-ownership delete, which is allowed for shared ownership regardless of the owners set.\n\nNormally, the ownership validation should determine where a deletion is allowed.",
      "parentUuid": "7a1969be_8058a357",
      "range": {
        "startLine": 493,
        "startChar": 21,
        "endLine": 494,
        "endChar": 30
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_277749d6",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 503,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-02-09T21:47:42Z",
      "side": 1,
      "message": "This seems sufficiently clear with the code below.",
      "range": {
        "startLine": 500,
        "startChar": 20,
        "endLine": 503,
        "endChar": 29
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_a5d85154",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 503,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-10T09:28:54Z",
      "side": 1,
      "message": "Actually, I added these in response to a previous comment from Nicolas that the code wasn\u0027t clear enough. However in the meantime I added more comments above, maybe it\u0027s okay to remove these comments now?",
      "parentUuid": "7a1969be_277749d6",
      "range": {
        "startLine": 500,
        "startChar": 20,
        "endLine": 503,
        "endChar": 29
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_0774cdcd",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 514,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-02-09T21:47:42Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 514,
        "startChar": 20,
        "endLine": 514,
        "endChar": 22
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_05de853f",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 514,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-10T09:28:54Z",
      "side": 1,
      "message": "See above.",
      "parentUuid": "7a1969be_0774cdcd",
      "range": {
        "startLine": 514,
        "startChar": 20,
        "endLine": 514,
        "endChar": 22
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_e049978c",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 586,
      "author": {
        "id": 1002760
      },
      "writtenOn": "2015-02-10T16:46:18Z",
      "side": 1,
      "message": "I thought a node with exclusive ownership can be orphaned, can\u0027t be?",
      "range": {
        "startLine": 583,
        "startChar": 12,
        "endLine": 586,
        "endChar": 70
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_ac9035ed",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 586,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-12T17:40:25Z",
      "side": 1,
      "message": "Maybe you are right and we should allow this case: to allow graceful removal of ownership upon shutdown.\n\nInitially, I intended orphan to mean only when the ownership node is deleted by zk.\n\nI will address this in the subsequent patch.",
      "parentUuid": "7a1969be_e049978c",
      "range": {
        "startLine": 583,
        "startChar": 12,
        "endLine": 586,
        "endChar": 70
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_c749158d",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 1138,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-02-09T21:47:42Z",
      "side": 1,
      "message": "still applicable?",
      "range": {
        "startLine": 1138,
        "startChar": 12,
        "endLine": 1138,
        "endChar": 59
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_457cfd20",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 1138,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-10T09:28:54Z",
      "side": 1,
      "message": "I think so, I didn\u0027t close the class caches here. Maybe I should close them too.",
      "parentUuid": "7a1969be_c749158d",
      "range": {
        "startLine": 1138,
        "startChar": 12,
        "endLine": 1138,
        "endChar": 59
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_874f1d92",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 1163,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-02-09T21:47:42Z",
      "side": 1,
      "message": "I guess this implies that even if the State api has no notion of version, it still makes sense that it shares the underlying Storage instance since owners do have version, right?",
      "range": {
        "startLine": 1163,
        "startChar": 25,
        "endLine": 1163,
        "endChar": 37
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_a594d137",
        "filename": "cluster/src/main/scala/org/midonet/cluster/data/storage/ZookeeperObjectMapper.scala",
        "patchSetId": 33
      },
      "lineNbr": 1163,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-10T09:28:54Z",
      "side": 1,
      "message": "The state is a sort of metadata for the underlying persistent objects, hence it depends on the current storage version.",
      "parentUuid": "7a1969be_874f1d92",
      "range": {
        "startLine": 1163,
        "startChar": 25,
        "endLine": 1163,
        "endChar": 37
      },
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_67aae11a",
        "filename": "cluster/src/main/scala/org/midonet/cluster/util/ObservablePathDirectoryCache.scala",
        "patchSetId": 33
      },
      "lineNbr": 47,
      "author": {
        "id": 1002731
      },
      "writtenOn": "2015-02-09T21:47:42Z",
      "side": 1,
      "message": "This just monitors children existence, but not their data?",
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_0527a565",
        "filename": "cluster/src/main/scala/org/midonet/cluster/util/ObservablePathDirectoryCache.scala",
        "patchSetId": 33
      },
      "lineNbr": 47,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2015-02-10T09:28:54Z",
      "side": 1,
      "message": "Yes, it\u0027s a lightweight version of the ObservablePathChildrenCache, since the ownership information is only stored in the key name.",
      "parentUuid": "7a1969be_67aae11a",
      "revId": "f87513b1eee8e4e2b1bbd7421d1c13e7284f80ad",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}